<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Give Feedback</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
        .error { color: red; background: #ffe6e6; padding: 10px; border: 1px solid red; }
        label { display: block; margin-top: 15px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; margin-top: 5px; }
        button { margin-top: 20px; padding: 10px 20px; background: green; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>

    <h2 th:text="'Feedback for: ' + ${school.name}">School Name</h2>
    <a href="/">Back to Home</a>
    <hr>

    <div th:if="${error}" class="error">
        <p th:text="${error}"></p>
    </div>

    <form action="/submit-feedback" method="post">
        <input type="hidden" name="schoolId" th:value="${school.id}">

        <div th:if="${school.emailRestricted}" style="background: #f9f9f9; padding: 15px; border-left: 5px solid orange;">
            <p><b>Authentication Required:</b> This college requires a valid student email to verify you haven't voted twice.</p>
            <label>Your Student Email (@<span th:text="${school.emailDomain}"></span>):</label>
            <input type="email" name="studentEmail" required placeholder="e.g. john@mit.edu">
        </div>

        <label>Select Faculty:</label>
        <select name="facultyId" required>
            <option value="">-- Select Teacher --</option>
            <option th:each="fac : ${facultyList}" th:value="${fac.id}" th:text="${fac.name} + ' (' + ${fac.subject} + ')'"></option>
        </select>

        <label>Teaching Quality (1-5):</label>
        <input type="number" name="teaching" min="1" max="5" required>

        <label>Punctuality (1-5):</label>
        <input type="number" name="punctuality" min="1" max="5" required>

        <label>Behavior (1-5):</label>
        <input type="number" name="behavior" min="1" max="5" required>

        <label>Comments:</label>
        <textarea name="comments" rows="4" required placeholder="Write your honest feedback here..."></textarea>

        <button type="submit">Submit Anonymously</button>
    </form>

</body>
</html>